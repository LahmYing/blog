---
title: 前端项目在阿里云部署
date: 2021-02-26
tags: [docker, 网络运维]
---

<!-- toc -->

# 业务流程
{% asset_img 前端项目在阿里云部署.jpg 800 600 前端项目在阿里云部署 %}


# RUN 命令
RUN 启动一个容器、执行命令、然后提交存储层文件变更，下一个 RUN 启动的是一个全新的容器，并不会继承上一个 RUN 的文件变更

# Dockerfile
```Dockerfile
# 引入基础镜像
FROM registry.cn-shenzhen.aliyuncs.com/znsms/centos7:centos7
LABEL maintainer "kangwenzhu" app "Maas Znsms Nginx web 1.16"
# 复制 nginx 安装包到 镜像
ADD nginx-1.16.1.tar.gz /data/app
# GPG 在 Linux 上的应用主要是实现官方发布的包的签名机制
# 估计用来验证 基础镜像 的
ADD RPM-GPG-KEY-CentOS-7 /etc/yum.repos.d/
RUN rpm --import /etc/yum.repos.d/RPM-GPG-KEY-CentOS-7 && \
yum -y install  gcc gcc-c++ make pcre-devel zlib-devel  openssl-devel  && \
yum clean all && \
yum clean packages && \
# 添加 nginx 用户
useradd -r -M -s /sbin/nologin nginx && \
mkdir -p /data/app/nginx/ssl && \
cd /data/app/nginx-1.16.1 && \
./configure --prefix=/data/app/nginx \
--user=nginx \
--group=nginx  \
&& make && make install && \
rm -rf /data/app/nginx-1.16.1 && \
ln -s /data/app/nginx/sbin/nginx /usr/sbin && \
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
echo 'Asia/Shanghai' >/etc/timezone
COPY nginx.conf /data/app/nginx/conf/nginx.conf
# 前端 build 后的源代码 dist
COPY dist /data/app/nginx/html/dist
ADD ssl.tar.gz /data/app/nginx/ssl
CMD ["/usr/sbin/nginx","-g","daemon off;"]
EXPOSE 80 443
```

# 项目截图
{% asset_img image.jpg 400 400 This is an example image %}



