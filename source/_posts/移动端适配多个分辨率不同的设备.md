---
title: 适配-移动端适配多个分辨率不同的设备
date: 2021-08-26 18:08:51
tags: [css, 适配]
category: [css]
---

<!-- toc -->

# 移动端适配多个分辨率不同的设备

https://www.cnblogs.com/zjzhang/p/6885790.html

## 关键词

`viewport缩放`, `dpr`, `基准设计稿`，`基准宽度`

## 通用方案

- 基准
  - 设 `1rem = 100px`，以 `width: 320px` iphone5 为基准设计稿
    - 浏览器默认 font-size 为 16px（常见）、14px（少见），`html { font-size: 100px/16px }` 即 `html { font-size: 625% }`
- 换算
  - 假设设计稿为 640px，换算时要先转为基准设计稿。比如设计稿上有 button 宽度为 30px，则 `30/2/100 = 0.15rem`
- 结合媒体查询设置其他 html font-size，比如

```css
@media screen and (min-width: 360px) and (max-width: 374px) and (orientation: portrait) {
  html {
    font-size: 703%;
  }
}
```

### 相关

- Chrome 最小 font-size 为 12px

## 网易方案

- 基准宽度
  - 假设以 iphone5 320px 为基准，且设 `1rem = 100px`，得基准宽度为 3.2rem，即**_无论设备多宽，都分为 3.2 份_**
- 动态 font-size
  - `document.documentElement.style.fontSize = document.documentElement.clientWidth / 3.2 + 'px';`
- 换算
  - 设计稿/100

## amfe-flexible （推荐）

[amfe-flexible](https://github.com/amfe/lib-flexible)
原理：https://juejin.cn/post/6844903833697517576

- 不要设定 viewport 缩放比例。flexible 会自动设定每个屏幕宽度的根 font-size、动态 viewport、针对 Retina 屏做的 dpr 适配
- 基准宽度为 10 rem
- 换算
  - 假设设计稿宽度 375px，1rem = 37.5px， 假设 button 宽度 75px，即为 75px/37.5px = 2rem

### 相比网易方案

- 不好计算
- 做了 viewport 缩放

# 相关

## 1px 等于多少设备物理像素

不同分辨率设备下 1px 代表的设备物理像素不同（一般 px 是 2 倍物理像素，设计图）
window.devicePixelRatio
用户缩放也会影响，放大 1 倍，代表的物理像素也放大 1 倍

## viewport

[我们常说的 viewport 是 layout viewport](https://www.runoob.com/w3cnote/viewport-deep-understanding.html)
移动端: 一般都是 980px
这个 layout viewport 的宽度可以通过 document.documentElement.clientWidth 来获取

## 查询设备宽度(px)

常用的直接 F12 看模拟调试的移动设备即可
https://viewportsizes.com/#footer

## clientWidth,offsetWidth 等

https://segmentfault.com/a/1190000017254887

## px 自动转 rem 工具

px2rem：https://www.npmjs.com/package/px2rem

## vw 实现动态 font-size

https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Responsive_Design

```css
h1 {
  /* 固定值+vw */
  font-size: calc(1.5rem + 3vw);
}
```
